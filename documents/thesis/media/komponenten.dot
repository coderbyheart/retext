digraph G {
rankdir=TB

edge [ arrowhead=onormal dir=forward ]
clusterrank=none

node [ style=filled fillcolor="#5abbe6" ]

subgraph user {
  rank=same
  ruser [ style=invis ]
  user [ style=filled label="Benutzer" penwidth=0 ]
}


subgraph c1 {
  rank=same
  r1 [ label="Externe\nTools" shape=none style=solid ]
  PlugIns [ shape=component ]
}

node [ fillcolor="#feefb3" ]

subgraph c2 {
  rank=same
  r2 [ style=invis ]
  GuiViews [ label="Views" shape=folder ]
}

subgraph c3 {
  rank=same
  r3 [ label="Browser-GUI" shape=none style=solid ]
  GuiController [ label=Controller shape=folder ]
  GuiModels [ label=Models shape=folder ]
}

subgraph c4 {
  rank=same
  r4 [ style=invis ]
  RequestHandlerGUI [ label="Request-\nHandler" shape=component ]
}

node [ fillcolor="#cccccc" penwidth=1 ]

subgraph c5 {
  rank=same
  r5 [ style=invis ]
  Shell [ shape=component label="Cronjobs,\nShell, â€¦" ]
}

subgraph c6 {
  rank=same
  r6 [ label="Server" shape=none style=solid ]
  RequestHandler [ label="API" shape=component ]
}

subgraph c7 {
  rank=same
  r7 [ style=invis ]
  Controller [ shape=folder ]
  di [ label="DI-Container" shape=component ]
  Models [ shape=folder ]
}

subgraph c8 {
  rank=same
  r8 [ style=invis ]
  IO [ label="Import/Export &\nBenachrichtigung" shape=folder ]
  Jobs [ shape=folder ]
  Persistenz [ shape=folder ]
  Workflow [ shape=folder ]
  ServiceAdapter [ shape=folder label="Service-\nAdapter" ]
}

subgraph c9 {
  rank=same
  r9 [ style=invis ]
  orm [ label="Object\nRelational\nMapper" shape=component ]
}

node [ fillcolor="#AC9573" ]

subgraph extern {
  rank=same
  extern [ label="Extern" shape=none style=solid ]
  RDBMS [ shape=component ]
  jobserver [ shape=component label="Job-Server" ]
  iosub [ shape=component label="I/O-Systeme\nLokal & Remote" ]
  Services [ shape=component label="Services\nLokal & Remote" ]
}


# Reihenfolge der Schichten erzwingen
edge [ style=invis ]
ruser -> r1 -> r2 -> r3 -> r4 -> r5 -> r6 -> r7 -> r8 -> r9 -> extern

edge [ style=solid dir=none arrowhead=none ]

di -> Persistenz
di -> Controller
di -> IO
di -> Jobs
di -> Workflow
di -> ServiceAdapter

jobserver -> Jobs

RDBMS -> orm

RequestHandler -> Controller
Persistenz -> Models
Controller -> Models
Jobs -> Models
IO -> Models

GuiController -> RequestHandlerGUI
GuiController -> GuiViews
GuiModels -> GuiViews
GuiModels -> GuiController
Persistenz -> orm
IO -> iosub
ServiceAdapter -> Services

edge [ arrowhead=normal dir=both color="#5abbe6" fontcolor="#5abbe6" ]
user -> Shell
user -> PlugIns
user -> GuiViews [ label=" Interaktion" ]

edge [ color="#66cd00" fontcolor="#66cd00" ]
RequestHandlerGUI -> RequestHandler [ label=" REST\nJSON" ]
PlugIns -> RequestHandler
Shell -> RequestHandler

}